<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ @TITLE ?: 'F3+Vue3 é¦–é¡µ' }}</title>
    <!-- ğŸ”¥ æ¢å›½å†…CDNï¼Œé¿å…åŠ è½½å¤±è´¥ -->
    <script src="https://cdn.bootcdn.net/ajax/libs/vue/3.4.21/vue.global.prod.js"></script>
</head>
<body>
    <!-- VueæŒ‚è½½å®¹å™¨ -->
    <div id="app">
        <h1>ğŸ“Œ F3ä¼ é€’æ•°æ® + Vue3æ¸²æŸ“</h1>
        <div class="user-card">
            <!-- Vueæ’å€¼è¯­æ³• -->
            <p>å§“åï¼š{{ user.name }}</p>
            <p>å¹´é¾„ï¼š{{ user.age }}</p>
            <p>æ€§åˆ«ï¼š{{ user.sex }}</p>
            <button @click="changeAge">å¹´é¾„+1</button>
        </div>
    </div>

    <script>
        // ğŸ”¥ ç»ˆæä¿®å¤ï¼šåˆ†æ­¥è§£æï¼ŒåŠ å¼‚å¸¸æ•è·
        try {
            // 1. è·å–F3ä¼ é€’çš„æ•°æ®ï¼ˆè½¬JSONå­—ç¬¦ä¸²ï¼Œç¡®ä¿ä¸­æ–‡ä¸è½¬ä¹‰ï¼‰
            const f3DataStr = '<? $data ?>';
            // 2. è§£æJSONï¼ˆåŠ å¼‚å¸¸æ•è·ï¼‰
            const f3Data = JSON.parse(f3DataStr || '{}');
            console.log('F3ä¼ é€’çš„æ•°æ®ï¼š', f3Data); // æ§åˆ¶å°æŸ¥çœ‹æ•°æ®

            // 3. åˆå§‹åŒ–Vue3
            const { createApp } = Vue;
            createApp({
                data() {
                    return {
                        user: f3Data // èµ‹å€¼ç»™Vueå“åº”å¼æ•°æ®
                    };
                },
                methods: {
                    changeAge() {
                        this.user.age = Number(this.user.age) + 1; // ç¡®ä¿æ˜¯æ•°å­—ç±»å‹
                    }
                }
            }).mount('#app');
        } catch (e) {
            console.error('åˆå§‹åŒ–å¤±è´¥ï¼š', e);
            // å…œåº•ï¼šæ‰‹åŠ¨èµ‹å€¼æµ‹è¯•æ•°æ®
            const { createApp } = Vue;
            createApp({
                data() {
                    return {
                        user: { name: 'æµ‹è¯•å¼ ä¸‰', age: 18, sex: 'ç”·' }
                    };
                }
            }).mount('#app');
        }
    </script>
</body>
</html>